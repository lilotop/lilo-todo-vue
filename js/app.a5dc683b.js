(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],r=!0,i=1;i<o.length;i++){var c=o[i];0!==n[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var r={},n={app:0},a=[];function s(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=r,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(o,r,function(t){return e[t]}.bind(null,r));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/lilo-todo-vue/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0080":function(e,t,o){e.exports=o.p+"media/KiP.263b028e.mp3"},"0a54":function(e,t,o){},"112f":function(e,t,o){},2538:function(e,t,o){},2557:function(e,t,o){},3500:function(e,t,o){"use strict";var r=o("79b1"),n=o.n(r);n.a},"43e6":function(e,t,o){},"4af6":function(e,t,o){"use strict";var r=o("a587"),n=o.n(r);n.a},"4b54":function(e,t,o){},"4def":function(e,t,o){"use strict";var r=o("43e6"),n=o.n(r);n.a},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("OfflineIndicator"),o("div",{staticClass:"app__masthead"},[o("div",{staticClass:"app__title"},[e._v("Lilo's TODO"),e.email?o("span",[e._v(" - "+e._s(e.email))]):e._e()]),o("NavMenu",{attrs:{links:e.navLinks}})],1),o("router-view")],1)},a=[],s=(o("d3b7"),o("3ca3"),o("ddb0"),o("96cf"),o("1da1")),i=o("ec41"),c=o("6740"),l=o("0a94"),u=(o("b0c0"),o("bc3a")),d=o.n(u),p=o("8c4f"),m=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("main",{staticClass:"todos"},[o("section",{staticClass:"todos__controls"},[o("button",{staticClass:"todos__controls__create-button btn",on:{click:e.newTodo}},[e._v("Create New Todo")]),o("div",{staticClass:"todos__controls__filter"},[e._v("Filter by project: "),o("ProjectSelector",{attrs:{all:e.ALL_PROJECTS},model:{value:e.projectFilter,callback:function(t){e.projectFilter=t},expression:"projectFilter"}})],1)]),o("List",{attrs:{columns:e.columns,items:e.todos},on:{selected:e.showTodo}}),e.modalOpen?o("ModalBox",{attrs:{title:e.todoForModal.title||"< untitled >","ok-button-text":"Save","menu-items":e.editorMenuItems},on:{ok:e.saveChanges,cancel:e.closeModal}},[o("TodoEditor",{attrs:{todo:e.todoForModal}})],1):e._e(),o("BlockUI",{attrs:{block:e.isUIBlocked,text:e.blockMessage}}),o("Toast",{ref:"toast"}),o("FormValidation",{ref:"validation",attrs:{rules:e.validationRules}}),e.showDeleteConfirm?o("ModalBox",{attrs:{title:"Are you sure?","ok-button-text":"Yes, DELETE!"},on:{ok:e.deleteTodo,cancel:function(t){e.showDeleteConfirm=!1}}},[o("h4",[e._v("Delete this TODO item?")])]):e._e()],1)},f=[];o("99af"),o("25f0");function h(e){var t=new Date(e),o=t.getDate(),r=1+t.getMonth(),n=t.getFullYear().toString().substring(2),a=t.getHours(),s=t.getMinutes();return"".concat(o,"/").concat(r,"/").concat(n," ").concat(a,":").concat(s)}function v(e){switch(e){case 1:return"High";case 2:return"None";case 3:return"Low"}}var b=o("5c8a"),g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"list"},[e.isSmallScreen?e._e():o("table",{staticClass:"desktop-list"},[o("tr",{staticClass:"list__headers"},[o("th",{staticClass:"list__headers__selection-indicator"}),e._l(e.columns,(function(t){return o("th",{staticClass:"list__headers__column"},[e._v(e._s(t.header))])}))],2),e._l(e.items,(function(t,r){return o("tr",{staticClass:"list__item",on:{click:function(o){return e.itemSelected(t)}}},[o("td",{staticClass:"list__selection-indicator",class:r===e.pointerIndex?"list__selection-indicator_selected":""}),e._l(e.columns,(function(r){return o("td",{staticClass:"list__item__column"},[r.type===Boolean?o("CheckBox",{attrs:{checked:t[r.field]}}):o("span",[e._v(e._s(r.formatter?r.formatter(t[r.field]):t[r.field]))])],1)}))],2)}))],2),e.isSmallScreen?o("div",{staticClass:"mobile-list"},e._l(e.items,(function(t){return o("table",{staticClass:"list__item",on:{click:function(o){return e.itemSelected(t)}}},e._l(e.columns,(function(r){return o("tr",[o("th",[e._v(e._s(r.header))]),o("td",{staticClass:"list__item__column"},[r.type===Boolean?o("CheckBox",{attrs:{checked:t[r.field]}}):o("span",[e._v(e._s(r.formatter?r.formatter(t[r.field]):t[r.field]))])],1)])})),0)})),0):e._e()])},_=[],k=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"check-box",class:{readonly:e.isReadOnly},attrs:{tabindex:e.isReadOnly?"":0},on:{click:function(t){return e.notifyToggle()},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.notifyToggle()}}},[e.value||e.checked?o("span",[o("svg",{staticClass:"check-mark",attrs:{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 40 40",width:e.size,height:e.size}},[o("path",{attrs:{d:"M21.15 31.19L21.15 31.19L13.74 40L0 23.69L7.42 14.88L13.73 22.39L32.58 0L40 8.81L21.15 31.19Z"}})])]):o("span",[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size}})])])},w=[],x=(o("a9e3"),{name:"CheckBox",props:{checked:{type:Boolean,default:void 0},id:String,value:Boolean,size:{type:Number,default:14}},methods:{notifyToggle:function(){this.isReadOnly||this.$emit("input",!this.value)}},computed:{isReadOnly:function(){return void 0!==this.checked}},mounted:function(){var e=this;this.id&&(this.label=document.querySelector('label[for="'.concat(this.id,'"]')),this.label&&null===this.label.onclick?this.label.onclick=function(){return e.notifyToggle()}:this.label=null)},beforeDestroy:function(){this.label&&(this.label.onclick=null)}}),j=x,y=o("2877"),C=Object(y["a"])(j,k,w,!1,null,"2b637821",null),O=C.exports,P={name:"List",components:{CheckBox:O},methods:{handleKey:function(e){if("body"===e.target.localName&&(38===e.which&&(null===this.pointerIndex||this.pointerIndex<=0?this.pointerIndex=this.items.length-1:this.pointerIndex--),40===e.which&&(null===this.pointerIndex||this.pointerIndex>=this.items.length-1?this.pointerIndex=0:this.pointerIndex++),32===e.which&&null!==this.pointerIndex)){var t=this.items[this.pointerIndex];t&&this.itemSelected(t)}},itemSelected:function(e){this.$emit("selected",e)}},data:function(){return{pointerIndex:null,isSmallScreen:!1}},props:{columns:Array,items:Array},mounted:function(){var e=this;window.addEventListener("keyup",this.handleKey),this.respondToMediaChanges=function(t){e.isSmallScreen=!!t.matches},this.mediaQuery=window.matchMedia("(max-width: 700px)"),this.respondToMediaChanges(this.mediaQuery),this.mediaQuery.addEventListener("change",this.respondToMediaChanges)},beforeDestroy:function(){window.removeEventListener("keyup",this.handleKey),this.mediaQuery.removeEventListener("change",this.respondToMediaChanges)}},T=P,S=(o("ad9d"),Object(y["a"])(T,g,_,!1,null,"0e70bca0",null)),M=S.exports,$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"project-selector"},[e.readonly?o("span",e._b({},"span",e.$attrs,!1),[e._v(e._s(e.getName(e.$attrs.value)))]):o("select",e._b({staticClass:"project",attrs:{title:e.getDescription(e.$attrs.value)},on:{input:function(t){return e.$emit("input",t.target.value)}}},"select",e.$attrs,!1),[e.all?o("option",{attrs:{title:e.getDescription(e.all)},domProps:{value:e.all}},[e._v("All")]):e._e(),o("option",{attrs:{title:e.getDescription()},domProps:{value:void 0}},[e._v("None")]),e._l(e.projects,(function(t){return o("option",{attrs:{title:t.description},domProps:{value:t._id}},[e._v(e._s(t.name))])}))],2)])},I=[],E=(o("a4d3"),o("e01a"),{name:"ProjectSelector",props:{readonly:Boolean,all:String},computed:{projects:function(){return tt.projects}},methods:{getName:function(e){var t=tt.getProject(e);return t?t.name:"None"},getDescription:function(e){if(e){if(this.all&&e===this.all)return"Show all projects";var t=tt.getProject(e);return t.description||""}return"Not assigned to any project"}}}),R=E,L=(o("571b"),Object(y["a"])(R,$,I,!1,null,"3798aa20",null)),U=L.exports,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modal__backdrop"},[o("div",{staticClass:"modal",attrs:{role:"dialog","aria-modal":"true"}},[e.title?o("div",{staticClass:"modal__header"},[o("div",{staticClass:"modal__header__title"},[e._v(e._s(e.title))]),e.menuItems?o("button",{staticClass:"modal__header__menu-toggle",on:{click:function(t){e.menuOpen=!e.menuOpen}}},[e._v(e._s(e.menuOpen?"▲":"☰"))]):e._e(),e.menuOpen?o("div",{staticClass:"modal__header__menu",on:{click:function(t){e.menuOpen=!e.menuOpen}}},e._l(e.menuItems,(function(t){return o("button",{staticClass:"btn",on:{click:t.handler}},[e._v(e._s(t.label))])})),0):e._e()]):e._e(),o("div",{staticClass:"modal__body"},[e._t("default",[o("i",[e._v("no content")])])],2),o("div",{staticClass:"modal__buttons"},[e.hideOK?e._e():o("button",{staticClass:"btn",on:{click:function(t){return e.$emit("ok")}}},[e._v(e._s(e.okButtonText))]),e.hideCancel?e._e():o("button",{staticClass:"btn",on:{click:function(t){return e.$emit("cancel")}}},[e._v(e._s(e.cancelButtonText))])])])])},F=[],N={name:"ModalBox",data:function(){return{menuOpen:!1}},props:{title:String,okButtonText:{type:String,default:"OK"},cancelButtonText:{type:String,default:"Cancel"},hideCancel:Boolean,hideOK:Boolean,menuItems:Array},mounted:function(){window.addEventListener("keydown",this.handleKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKey)},methods:{handleKey:function(e){if(27===e.keyCode&&(this.hideCancel?this.$emit("ok"):this.$emit("cancel")),9===e.keyCode){var t=this.$el.querySelectorAll("input,button,select,.check-box");if(t.length){var o=t[0],r=t[t.length-1],n=e.shiftKey;n?e.target===o&&(r.focus(),e.preventDefault()):e.target===r&&(o.focus(),e.preventDefault())}}}}},D=N,A=(o("d655"),Object(y["a"])(D,B,F,!1,null,"ae3f9544",null)),V=A.exports,q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"todo-editor"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.todo.title,expression:"todo.title"}],staticClass:"title",class:{title_done:e.todo.done},attrs:{type:"text",id:"todo-title"},domProps:{value:e.todo.title},on:{input:function(t){t.target.composing||e.$set(e.todo,"title",t.target.value)}}}),o("div",{staticClass:"priority"},[e._v("Priority: "),o("Priority",{model:{value:e.todo.priority,callback:function(t){e.$set(e.todo,"priority",t)},expression:"todo.priority"}})],1),o("div",{staticClass:"done"},[o("label",{attrs:{for:"done"}},[e._v("Done? ")]),o("CheckBox",{attrs:{id:"done",size:e.checkBoxSize},model:{value:e.todo.done,callback:function(t){e.$set(e.todo,"done",t)},expression:"todo.done"}})],1),o("div",{staticClass:"project"},[e._v(" Project: "),o("ProjectSelector",{model:{value:e.todo.project,callback:function(t){e.$set(e.todo,"project",t)},expression:"todo.project"}})],1),o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.todo.description,expression:"todo.description"}],staticClass:"description",domProps:{value:e.todo.description},on:{input:function(t){t.target.composing||e.$set(e.todo,"description",t.target.value)}}})])},K=[],z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"priority"},[e.readonly?o("span",e._b({},"span",e.$attrs,!1),[e._v(e._s(e.getLabel(e.$attrs.value)))]):o("select",e._b({staticClass:"priority",on:{input:function(t){e.$emit("input",parseInt(t.target.value))}}},"select",e.$attrs,!1),e._l(3,(function(t){return o("option",{domProps:{value:t}},[e._v(e._s(e.getLabel(t)))])})),0)])},J=[],Q={name:"Priority",props:{readonly:{default:!1}},methods:{getLabel:function(e){return v(e)}}},H=Q,Y=(o("ee9e"),Object(y["a"])(H,z,J,!1,null,"0c86c6cc",null)),W=Y.exports,G={name:"TodoEditor",components:{ProjectSelector:U,CheckBox:O,Priority:W},data:function(){return{checkBoxSize:14}},props:["todo"],mounted:function(){var e=this;this.$el.querySelector(".title").focus(),this.respondToMediaChanges=function(t){t.matches?e.checkBoxSize=30:e.checkBoxSize=14},this.mediaQuery=window.matchMedia("(max-width: 700px)"),this.respondToMediaChanges(this.mediaQuery),this.mediaQuery.addEventListener("change",this.respondToMediaChanges)},beforeDestroy:function(){this.mediaQuery.removeEventListener("change",this.respondToMediaChanges)}},Z=G,X=(o("8695"),Object(y["a"])(Z,q,K,!1,null,"24c7a7d8",null)),ee=X.exports,te=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isVisible?o("div",{staticClass:"toast-background",on:{click:e.closeToast}},[o("div",{staticClass:"toast-box",class:e.type},[e._v(" "+e._s(e.text)+" ")])]):e._e()},oe=[],re={name:"Toast",data:function(){return{text:"",isVisible:!1,type:""}},methods:{closeToast:function(){this.isVisible=!1,this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=null)},pop:function(e,t,o){var r=this;this.closeToast(),this.type=t,this.text=e,this.isVisible=!0,this.timeoutHandle=setTimeout((function(){return r.isVisible=!1}),o)},popError:function(e){this.pop(e,"error",3e3)},popInfo:function(e){this.pop(e,"info",3e3)},popSuccess:function(e){this.pop(e,"success",1e3)}}},ne=re,ae=(o("cf7d"),Object(y["a"])(ne,te,oe,!1,null,"43439940",null)),se=ae.exports,ie=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.isVisible?o("div",{staticClass:"background",on:{click:e.closeInfo}},[o("div",{staticClass:"info-box"},[o("p",{staticClass:"title"},[e._v("Please correct the following validation errors to continue")]),e._l(e.errors,(function(t){return o("div",{staticClass:"validation-error"},[e._v(" "+e._s(t)+" ")])})),o("p",{staticClass:"close-tip"},[e._v("click anywhere to close this dialog")])],2)]):e._e()},ce=[];o("d28b"),o("ac1f");function le(e){var t=document.getElementById(e);return t?t.value:(console.error("Validation: field with id '".concat(e,"' was not found in document")),"")}var ue={name:"FormValidation",data:function(){return{isVisible:!1,errors:[]}},props:{rules:Array},methods:{closeInfo:function(){this.isVisible=!1},validate:function(){this.errors=[];var e=!0,t=!1,o=void 0;try{for(var r,n=this.rules[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var a=r.value;switch(a.type){case"required":0===le(a.id).length&&this.errors.push("".concat(a.name," is required"));break;case"email":var s=le(a.id);s.length&&null===/\S+@\S+\.\S+/.exec(s)&&this.errors.push("".concat(a.name,": ").concat(s," is not a valid email"));break;case"match":var i=le(a.id1),c=le(a.id2);i!==c&&this.errors.push("".concat(a.name," fields do not match"));break;case"minLength":le(a.id).length<a.value&&this.errors.push("".concat(a.name," must have at least ").concat(a.value," characters"));default:console.error("Validation rule of type ".concat(a.type," is not supported"))}}}catch(l){t=!0,o=l}finally{try{e||null==n.return||n.return()}finally{if(t)throw o}}return!this.errors.length||(this.isVisible=!0,!1)}}},de=ue,pe=(o("4af6"),Object(y["a"])(de,ie,ce,!1,null,"239bf61a",null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.block?o("div",{staticClass:"blocker"},[o("div",{staticClass:"text"},[e._v(e._s(e.text))])]):e._e()},he=[],ve={name:"BlockUI",props:{text:String,block:Boolean}},be=ve,ge=(o("ca7f"),Object(y["a"])(be,fe,he,!1,null,"3d21bda9",null)),_e=ge.exports,ke={name:"todos",components:{BlockUI:_e,FormValidation:me,Toast:se,TodoEditor:ee,ModalBox:V,List:M,ProjectSelector:U},props:{project:String},data:function(){return{isUIBlocked:!1,todoForModal:{},modalOpen:!1,showDeleteConfirm:!1,blockMessage:"",ALL_PROJECTS:"all",NO_PROJECT:"none",columns:[{header:"Title",field:"title"},{header:"Created",field:"createdAt",formatter:this.getDateTime},{header:"Modified",field:"modifiedAt",formatter:this.getDateTime},{header:"Project",field:"project",formatter:this.getProjectName},{header:"Priority",field:"priority",formatter:this.getPriorityName},{header:"Done",field:"done",type:Boolean}],validationRules:[{type:"required",id:"todo-title",name:"Title"}],editorMenuItems:null}},computed:{todos:function(){return this.projectFilter===this.ALL_PROJECTS?tt.todos:tt.getTodosByProject(this.projectFilter)},projectFilter:{get:function(){return this.project?this.project===this.NO_PROJECT?void 0:this.project:this.ALL_PROJECTS},set:function(e){this.$router.push({name:"todos",query:{project:e||this.NO_PROJECT}})}}},methods:{blockUI:function(e){this.blockMessage=e,this.isUIBlocked=!0},unblockUI:function(){this.blockMessage="",this.isUIBlocked=!1},getDateTime:function(e){return h(e)},getProjectName:function(e){var t=tt.getProject(e);return t?t.name:"None"},getPriorityName:function(e){return v(e)},saveAndNew:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveChanges();case 2:e.modalOpen=!0;case 3:case"end":return t.stop()}}),t)})))()},deleteTodo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showDeleteConfirm=!1,e.blockUI("Deleting..."),t.prev=2,t.next=5,tt.deleteTodo(e.todoForModal._id);case 5:e.todoForModal={},e.modalOpen=!1,e.$refs.toast.popSuccess("Deleted"),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),console.error(t.t0),e.$refs.toast.popError("Unable to delete");case 14:return t.prev=14,e.unblockUI(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,10,14,17]])})))()},showTodo:function(e){var t=this;this.todoForModal=Object(b["a"])(e),this.editorMenuItems=[{label:"Save & New",handler:this.saveAndNew},{label:"Delete",handler:function(){return t.showDeleteConfirm=!0}}],this.modalOpen=!0},newTodo:function(){this.todoForModal={},this.editorMenuItems=[{label:"Save & New",handler:this.saveAndNew}];var e=this.$route.query.project;e&&e!==this.NO_PROJECT&&e!==this.ALL_PROJECTS&&(this.todoForModal.project=e),this.modalOpen=!0},closeModal:function(){this.modalOpen=!1,this.todoForModal={}},saveChanges:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.validation.validate()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,e.blockUI("Saving changes..."),!e.todoForModal._id){t.next=9;break}return t.next=7,tt.updateTodo(e.todoForModal);case 7:t.next=11;break;case 9:return t.next=11,tt.addTodo(e.todoForModal);case 11:e.modalOpen=!1,e.todoForModal={},e.$refs.toast.popSuccess("TODO Saved"),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0),o=Object(i["a"])(t.t0,"response.data.error","Unknown error"),e.$refs.toast.popError(o);case 21:return t.prev=21,e.unblockUI(),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[2,16,21,24]])})))()}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blockUI("Loading TODOs from server..."),t.next=3,tt.loadFromServer();case 3:e.unblockUI();case 4:case"end":return t.stop()}}),t)})))()}},we=ke,xe=(o("3500"),Object(y["a"])(we,m,f,!1,null,"65e065ea",null)),je=xe.exports,ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("main",{staticClass:"projects"},[o("section",{staticClass:"projects__controls"},[o("button",{staticClass:"projects__controls__create-button btn",on:{click:e.newProject}},[e._v("Create New Project")])]),o("List",{attrs:{columns:e.columns,items:e.projects},on:{selected:e.projectSelected}}),o("BlockUI",{attrs:{block:e.blockUI,text:e.blockMessage}}),e.modalOpen?o("ModalBox",{attrs:{title:"Create Project","ok-button-text":"Create"},on:{ok:e.createProject,cancel:e.closeModal}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.projectForModal,expression:"projectForModal"}],attrs:{type:"text",id:"new-project-name"},domProps:{value:e.projectForModal},on:{input:function(t){t.target.composing||(e.projectForModal=t.target.value)}}})]):e._e(),o("FormValidation",{ref:"validation",attrs:{rules:[{type:"required",id:"new-project-name",name:"Project name"}]}}),o("Toast",{ref:"toast"})],1)},Ce=[],Oe={name:"projects",components:{Toast:se,FormValidation:me,ModalBox:V,BlockUI:_e,List:M},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.blockMessage="Loading projects from server...",e.blockUI=!0,t.next=4,tt.loadFromServer();case 4:e.blockUI=!1;case 5:case"end":return t.stop()}}),t)})))()},methods:{projectSelected:function(e){this.$router.push({name:"todos",query:{project:e._id}})},newProject:function(){this.projectForModal="",this.modalOpen=!0},closeModal:function(){this.projectForModal="",this.modalOpen=!1},createProject:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.validation.validate()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.blockMessage="Creating Project...",e.blockUI=!0,t.next=7,tt.addProject({name:e.projectForModal});case 7:e.modalOpen=!1,e.projectForModal={},e.$refs.toast.popSuccess("Project Created"),t.next=19;break;case 12:t.prev=12,t.t0=t["catch"](2),console.log(t.t0),o=Object(i["a"])(t.t0,"response.data.error","Unknown error"),r=Object(i["a"])(t.t0,"response.data.errorCategory"),"duplicate"===r&&(o="A project with that name already exists"),e.$refs.toast.popError(o);case 19:return t.prev=19,e.blockUI=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,12,19,22]])})))()}},data:function(){return{blockUI:!1,blockMessage:"",columns:[{header:"Project",field:"name"},{header:"Description",field:"description"}],projectForModal:"",modalOpen:!1}},computed:{projects:function(){return tt.projects}}},Pe=Oe,Te=(o("fd63"),Object(y["a"])(Pe,ye,Ce,!1,null,"5bc95cb0",null)),Se=Te.exports,Me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"about"},[r("img",{attrs:{src:o("cf05"),alt:"logo"},on:{click:e.logoClick}}),r("audio",{attrs:{src:o("0080"),"aria-hidden":"true"}}),r("h4",[e._v("No UI/CSS libraries were hurt (or used) during the development of this app.")]),r("h4",[e._v("Created by Lilo Elia, 2020")]),e._m(0),r("Toast",{ref:"toast"})],1)},$e=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("h5",[e._v("Source code available "),o("a",{attrs:{href:"https://github.com/lilotop/lilo-todo-vue",target:"_blank"}},[e._v("here")]),e._v(" (frontend) and "),o("a",{attrs:{href:"https://github.com/lilotop/lilo-todo-server",target:"_blank"}},[e._v("here")]),e._v(" (backend) ")])}],Ie={name:"About",components:{Toast:se},data:function(){return{clicks:0}},methods:{logoClick:function(){7===this.clicks?(this.$refs.toast.popInfo("Knowledge is Power"),this.$el.querySelector("audio").play(),this.clicks=0):this.clicks++}}},Ee=Ie,Re=(o("4def"),Object(y["a"])(Ee,Me,$e,!1,null,"2c99145f",null)),Le=Re.exports,Ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"login"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("img",{attrs:{src:o("cf05"),alt:"logo"}}),r("p",[e._v("Welcome to Lilo's TODO application, please login to continue")]),r("p",[e._v("Don't have an account yet? You can "),r("router-link",{attrs:{to:"/sign-up"}},[e._v("sign up")]),e._v(" for free ")],1),r("section",{staticClass:"form"},[r("label",{attrs:{for:"username"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],attrs:{type:"text",id:"username"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("span",[r("button",{staticClass:"btn"},[e._v("Login")]),e._v(" or "),r("router-link",{attrs:{to:"/sign-up"}},[e._v("sign up")]),e._v(" for free")],1)])]),r("Toast",{ref:"toast"}),r("BlockUI",{attrs:{block:e.blockUI,text:"Logging in user..."}}),r("FormValidation",{ref:"validation",attrs:{rules:e.validationRules}})],1)},Be=[],Fe={name:"login",components:{FormValidation:me,Toast:se,BlockUI:_e,ModalBox:V},data:function(){return{user:"",password:"",blockUI:!1,validationRules:[{type:"required",id:"username",name:"Name"},{type:"required",id:"password",name:"Password"}]}},methods:{login:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.validation.validate()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.blockUI=!0,t.next=6,Xe.login(e.user,e.password);case 6:return o=t.sent,e.$cookies.set("token",o.data.token,"7d"),t.next=10,e.$router.push({name:"todos"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),401===Object(i["a"])(t.t0,"response.status")?e.$refs.toast.popError("Incorrect user name or password."):e.$refs.toast.popError("Could not login. Please try again later.");case 15:return t.prev=15,e.blockUI=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()}}},Ne=Fe,De=(o("fc16"),Object(y["a"])(Ne,Ue,Be,!1,null,"23f07f61",null)),Ae=De.exports,Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"login"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.signUp(t)}}},[r("img",{attrs:{src:o("cf05"),alt:"logo"}}),r("p",[e._v("Welcome to Lilo's TODO application, please complete this form to sign up")]),r("p",[e._v("Already have an account? "),r("router-link",{attrs:{to:"/login"}},[e._v("Login")]),e._v(" to your account ")],1),r("section",{staticClass:"form"},[r("label",{attrs:{for:"username"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],attrs:{type:"text",id:"username"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}}),r("label",{attrs:{for:"email"}},[e._v("Email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",id:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),r("label",{attrs:{for:"password"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),r("label",{attrs:{for:"password-repeat"}},[e._v("Retype the Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.passwordRepeat,expression:"passwordRepeat"}],attrs:{type:"password",id:"password-repeat"},domProps:{value:e.passwordRepeat},on:{input:function(t){t.target.composing||(e.passwordRepeat=t.target.value)}}}),r("span",[r("button",{staticClass:"btn"},[e._v("SIGN UP")]),e._v(" or "),r("router-link",{attrs:{to:"/login"}},[e._v("login here")])],1)])]),r("BlockUI",{attrs:{block:e.blockUI,text:"Signing up '"+e.user+"'..."}}),r("Toast",{ref:"toast"}),r("FormValidation",{ref:"validation",attrs:{rules:e.validationRules}})],1)},qe=[],Ke={name:"signUp",components:{FormValidation:me,Toast:se,BlockUI:_e,ModalBox:V},data:function(){return{user:"",email:"",password:"",passwordRepeat:"",blockUI:!1,validationRules:[{type:"required",id:"username",name:"Name"},{type:"required",id:"email",name:"Email"},{type:"email",id:"email",name:"Email"},{type:"minLength",value:6,id:"password",name:"Password"},{type:"match",id1:"password",id2:"password-repeat",name:"Password"}]}},methods:{signUp:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.validation.validate()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.blockUI=!0,t.next=6,Xe.signUp(e.user,e.email,e.password);case 6:return o=t.sent,e.$cookies.set("token",o.data.token,"7d"),t.next=10,e.$router.push({name:"todos"});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),401===Object(i["a"])(t.t0,"response.status")?e.$refs.toast.popError("Incorrect user name or password."):(r=Object(i["a"])(t.t0,"response.data.errorCategory"),"duplicate"===r?e.$refs.toast.popError("User or email already exists."):e.$refs.toast.popError("Could not sign up. Please try again later."));case 15:return t.prev=15,e.blockUI=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))()}}},ze=Ke,Je=(o("8080"),Object(y["a"])(ze,Ve,qe,!1,null,"9fd418b0",null)),Qe=Je.exports;r["a"].use(p["a"]);var He=[{path:"/",redirect:"/todos"},{path:"/todos",name:"todos",component:je,props:function(e){return{project:e.query.project}}},{path:"/projects",name:"projects",component:Se},{path:"/about",name:"about",component:Le},{path:"/login",name:"login",component:Ae},{path:"/sign-up",name:"sign-up",component:Qe}],Ye=new p["a"]({base:"/lilo-todo-vue/",routes:He}),We=Ye,Ge=d.a.create({baseURL:"https://lilo-todo-server.herokuapp.com/api/v1",withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}});Ge.interceptors.response.use((function(e){return e}),(function(e){return e.response&&401===e.response.status&&"login"!==We.currentRoute.name&&We.push({name:"login"}),Promise.reject(e)})),Ge.interceptors.request.use((function(e){var t=r["a"].$cookies.get("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var Ze,Xe={getTodos:function(){return Ge.get("/todos")},updateTodo:function(e,t){return Ge.put("/todos/"+e,t)},addTodo:function(e){return Ge.post("/todos",e)},deleteTodo:function(e){return Ge.delete("/todos/"+e)},getProjects:function(){return Ge.get("/projects")},updateProject:function(e,t){return Ge.put("/projects/"+e,t)},addProject:function(e){return Ge.post("/projects",e)},deleteProject:function(e){return Ge.delete("/projects/"+e)},getUser:function(){return Ge.get("/auth/user")},login:function(e,t){return Ge.post("/auth/login",{name:e,password:t})},signUp:function(e,t,o){return Ge.post("/auth/register",{name:e,email:t,password:o})},logout:function(){r["a"].$cookies.remove("token")}},et=r["a"].observable({projects:[],todos:[],user:{},error:null,handleError:function(e){et.reset(),401!==Object(i["a"])(e,"response.status")&&(et.error=e.message||e.response.status,console.log("Failed to load store, error: ",et.error))},getProject:function(e){return Object(l["a"])(et.projects,["_id",e])},getTodosByProject:function(e){return e?Object(c["a"])(et.todos,(function(t){return t.project===e})):Object(c["a"])(et.todos,(function(e){return!e.project}))},updateTodo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Xe.updateTodo(e._id,e);case 2:return o.next=4,t.loadFromServer(!0);case 4:case"end":return o.stop()}}),o)})))()},addTodo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Xe.addTodo(e);case 2:return o.next=4,t.loadFromServer(!0);case 4:case"end":return o.stop()}}),o)})))()},deleteTodo:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Xe.deleteTodo(e);case 2:return o.next=4,t.loadFromServer(!0);case 4:case"end":return o.stop()}}),o)})))()},addProject:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,Xe.addProject(e);case 2:return o.next=4,t.loadFromServer(!0);case 4:case"end":return o.stop()}}),o)})))()},loadFromServer:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(Ze&&!e){o.next=15;break}return o.prev=1,o.next=4,Promise.all([Xe.getTodos(),Xe.getProjects(),Xe.getUser()]);case 4:r=o.sent,et.todos=r[0].data.data,et.projects=r[1].data.data,et.user=r[2].data.data,et.error=null,Ze=!0,o.next=15;break;case 12:o.prev=12,o.t0=o["catch"](1),t.handleError(o.t0);case 15:case"end":return o.stop()}}),o,null,[[1,12]])})))()},reset:function(){et.projects=[],et.todos=[],et.user={}}}),tt=et,ot=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.storeError?o("div",{staticClass:"offline-indicator"},[o("div",{staticClass:"text"},[e._v("Cannot connect to the server ("+e._s(e.storeError)+"). "),o("a",{attrs:{href:"#"},on:{click:function(t){return e.tryToConnect()}}},[e._v("retry")])])]):e._e()},rt=[],nt={name:"OfflineIndicator",computed:{storeError:function(){return tt.error}},methods:{tryToConnect:function(){tt.loadFromServer(!0)}}},at=nt,st=(o("a0b3"),Object(y["a"])(at,ot,rt,!1,null,"4d345389",null)),it=st.exports,ct=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"nav-menu",class:{open:e.isOpen}},[e._l(e.links,(function(t){return o("span",{staticClass:"nav-menu__link"},[t.path?o("router-link",{attrs:{to:t.path}},[e._v(e._s(t.label))]):e._e(),t.handler?o("a",{attrs:{href:""},on:{click:t.handler}},[e._v(e._s(t.label))]):e._e()],1)})),o("button",{staticClass:"nav-menu__toggle btn",on:{click:function(t){e.isOpen=!e.isOpen}}},[e._v(e._s(e.isOpen?"▲":"☰"))])],2)},lt=[],ut={name:"NavMenu",data:function(){return{isOpen:!1}},props:{links:Array}},dt=ut,pt=(o("6e85"),Object(y["a"])(dt,ct,lt,!1,null,"e4d841ac",null)),mt=pt.exports,ft={components:{NavMenu:mt,OfflineIndicator:it},methods:{logout:function(){tt.reset(),Xe.logout(),this.$router.push({name:"login"})}},computed:{email:function(){return tt.user.email},navLinks:function(){var e=[];return this.email&&(e.push({label:"Todos",path:"/todos"}),e.push({label:"Projects",path:"/projects"})),e.push({label:"About",path:"/about"}),this.email?e.push({label:"Logout",handler:this.logout}):(e.push({label:"Login",path:"/login"}),e.push({label:"SignUp",path:"/sign-up"})),e}}},ht=ft,vt=(o("5c0b"),Object(y["a"])(ht,n,a,!1,null,null,null)),bt=vt.exports,gt=o("2b27"),_t=o.n(gt),kt=o("dc21"),wt=o("e594");kt["a"]({dsn:"https://fd7f6f6e4edb4873b504d5e702731969@sentry.io/3111934",integrations:[new wt["a"]({Vue:r["a"],attachProps:!0,logErrors:!0})]}),r["a"].use(_t.a),r["a"].config.productionTip=!1,new r["a"]({router:We,render:function(e){return e(bt)}}).$mount("#app")},"571b":function(e,t,o){"use strict";var r=o("f0af"),n=o.n(r);n.a},"5c0b":function(e,t,o){"use strict";var r=o("9c0c"),n=o.n(r);n.a},"6e85":function(e,t,o){"use strict";var r=o("9779"),n=o.n(r);n.a},"79b1":function(e,t,o){},8080:function(e,t,o){"use strict";var r=o("2557"),n=o.n(r);n.a},8695:function(e,t,o){"use strict";var r=o("2538"),n=o.n(r);n.a},"93b1":function(e,t,o){},9779:function(e,t,o){},"9c0c":function(e,t,o){},a0b3:function(e,t,o){"use strict";var r=o("112f"),n=o.n(r);n.a},a587:function(e,t,o){},ad9d:function(e,t,o){"use strict";var r=o("af7e"),n=o.n(r);n.a},af7e:function(e,t,o){},ca7f:function(e,t,o){"use strict";var r=o("0a54"),n=o.n(r);n.a},cf05:function(e,t,o){e.exports=o.p+"img/logo.c6b64768.png"},cf7d:function(e,t,o){"use strict";var r=o("ed28"),n=o.n(r);n.a},d325:function(e,t,o){},d603:function(e,t,o){},d655:function(e,t,o){"use strict";var r=o("4b54"),n=o.n(r);n.a},ed28:function(e,t,o){},ee9e:function(e,t,o){"use strict";var r=o("93b1"),n=o.n(r);n.a},f0af:function(e,t,o){},fc16:function(e,t,o){"use strict";var r=o("d603"),n=o.n(r);n.a},fd63:function(e,t,o){"use strict";var r=o("d325"),n=o.n(r);n.a}});
//# sourceMappingURL=app.a5dc683b.js.map